<html>

<head>
  <meta charset="UTF-8">
  <title>Document</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <style>
    body {
      background-color: #331909;
    }

    .con {
        background-color: floralwhite;
        padding: 70px 0px;
        position: absolute;
        background-image: url('UI/background.png');
        /* background-size: cover; */
        background-size: 100% 100%;
        overflow: hidden;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        max-width: 1080;
        /* padding-left: 50%; */
    }
  
    #screen {
        background-color: rgb(0, 0, 0);
        width: 100%;
        height: auto;
        border: 2px solid rgb(229, 229, 229);
        font-size: 28px;
    }

    .content {
        border: 0px solid rgb(204, 204, 204);
        border-radius: 0px;
        width: 320px;
        height: 45px;
        font-size: 18px;
        margin-top: 20px;
        background-image: url('UI/input_field.png');
        background-size: 100% 100%;
        text-align: center;
    }
  
    .send {
        border: 1px solid rgb(230, 80, 30);
        color: rgb(230, 80, 0);
        border-radius: 3px;
        text-align: center;
        padding: 0;
        height: 35px;
        line-height: 35px;
        font-size: 14px;
        width: 159px;
        background-color: white;
    }
  
    .clear {
        border: 1px solid;
        color: darkgray;
        border-radius: 3px;
        text-align: center;
        padding: 0;
        height: 35px;
        line-height: 35px;
        font-size: 14px;
        width: 159px;
        background-color: white;
    }

    .btnsend {
      border: 0px solid;
      height: 35px;
      width: 100px;
      background-image: url('UI/btn_send.png');
      background-size: 100% 100%;
    }

    .btnclear {
      border: 0px solid;
      height: 35px;
      width: 100px;
      background-image: url('UI/btn_clear.png');
      background-size: 100% 100%;
    }
  
    .edit {
        margin: 0px;
        text-align: center;
    }

    .quest {
      margin: 0px;
      text-align: center;
      /* -webkit-text-fill-color: rgb(0, 0, 0);
      -webkit-text-stroke-color: rgb(0, 0, 0);
      -webkit-text-stroke-width: 1.00px;  */
      /* background-color: aqua; */
      font-weight: bold;
    }

    .q_style {
      border: 0px solid;
      height: 50px;
      width: 350px;
      background-image: url('UI/btn_select.png');
      background-size: 100% 100%;
      -webkit-text-fill-color: rgb(0, 0, 0);
      -webkit-text-stroke-color: rgb(0, 0, 0);
      -webkit-text-stroke-width: 1.00px; 
      font-size: 18;
    }

    img {
      max-width: 100%;
      max-height: 100%;
    }
  
    .edit .btns{
        margin-top: 20px;
    }
  
    .edit .msg input{
        padding-left: 5px;
    }
  
    .text {
        position: absolute;
    }
  
    * {
        margin: 0;
        padding: 0;
    }
  
    .dm_show {
        margin: 10px;
        color: white;
    }

    .video-overlay {
        position: absolute;
        left: 0px;
        top: 0px;
        margin: 10px;
        padding: 5px 5px;
        font-size: 20px;
        font-family: Helvetica;
        color: #FFF;
        background-color: rgba(50, 50, 50, 0.3);
    }

    .overlay {
      position: absolute;
      pointer-events:none;
      width: 100%;
      height: auto;
      z-index: 9;
    }

</style>

</head>

<body>
  <div class="con">
    <div id="screen"><!-- <div>text message</div> -->
        <div class="dm_show">
            
            <video width="100%" height="auto" controls id="v">
              <source src="p0323_s.mp4" type="video/mp4">
            </video>
        </div>
    </div>
    <div class="edit">
        <p class="msg">
            <input placeholder="說點甚麼吧？" class="content" type="text" />
        </p>
        <p class="btns">
            <input type="button" class="btnsend" />
            <input type="button" class="btnclear" />
        </p>
        <p></p>
        <p></p>
        <div id="q_area" class="quest">
          <div id="q_q">問題1</div>
          <button type="button" id="q_a" class="q_style" onclick="clickAns('A')">答案1</button><br>
          <button type="button" id="q_b" class="q_style" onclick="clickAns('B')">答案2</button><br>
          <button type="button" id="q_c" class="q_style" onclick="clickAns('C')">答案3</button><br>
          <button type="button" id="q_d" class="q_style" onclick="clickAns('D')">答案4</button><br>
          <p></p>
          <div id="q_result"></div>
        </div>
        <!-- <div id="q_img" class="quest">
          <img src="UI/icons.png" width="auto">
        </div> -->
    </div>
  </div>

  <div class="overlay"><video width="100%" height="100%" id="overlayVideo" src="失敗.webm" autoplay></video></div>

  <br>
  
  <script>
    var vt_url = 'https://www.youtube.com/watch?v=vDX8XrhdPTQ';
    var say = document.getElementById('say');
    var q_area = document.getElementById('q_area');
    var q_q = document.getElementById('q_q');
    var q_a = document.getElementById('q_a');
    var q_b = document.getElementById('q_b');
    var q_c = document.getElementById('q_c');
    var q_d = document.getElementById('q_d');
    var q_result = document.getElementById('q_result');
    var q_ans = '';
    var q_num = 0;
    var q_ov = document.getElementById('overlayVideo');

    var quests = [];
    quests.push({
      startTime: 1787,
      endTime: 1846,
      yes: 'anim/Yes01.webm',
      no: 'anim/No01.webm',
      q: '給你一個讚，比的是哪一指？',
      a: '大頭拇',
      b: '尾二指',
      c: '二指',
      d: '尾指',
      ans: 'A',
    });
    quests.push({
      startTime: 1846,
      endTime: 1870,
      yes: 'anim/Yes02.webm',
      no: 'anim/No02.webm',
      q: '哪一種食物不是屬於台灣古早味？',
      a: '披薩',
      b: '擔仔麵',
      c: '滷肉飯',
      d: '豬油攪飯',
      ans: 'A',
    });
    quests.push({
      startTime: 1870,
      endTime: 1932,
      yes: 'anim/Yes03.webm',
      no: 'anim/No03.webm',
      q: '加減乘（＋－×），猜一個中文字？',
      a: '文',
      b: '天',
      c: '支',
      d: '大',
      ans: 'C',
    });
    quests.push({
      startTime: 1932,
      endTime: 2000,
      yes: 'anim/Yes04.webm',
      no: 'anim/No04.webm',
      q: '哪一種水果有「大吉大利」的寓意？',
      a: '王梨',
      b: '弓蕉',
      c: '刺波',
      d: '柑仔',
      ans: 'D',
    });
    quests.push({
      startTime: 2000,
      endTime: 2040,
      yes: 'anim/Yes05.webm',
      no: 'anim/No05.webm',
      q: '為什麼會產生「影子」？',
      a: '光被物體擋住',
      b: '光有黑色的成分',
      c: '因為陰天才會出現影子',
      d: '物體是活的才會有影子',
      ans: 'A',
    });
    quests.push({
      startTime: 2040,
      endTime: 2066,
      yes: 'anim/Yes06.webm',
      no: 'anim/No06.webm',
      q: '掃把掃地是什麼原理？',
      a: '齒輪原理',
      b: '槓桿原理',
      c: '虹吸管原理',
      d: '折射原理',
      ans: 'B',
    });
    quests.push({
      startTime: 2066,
      endTime: 2090,
      yes: 'anim/Yes07.webm',
      no: 'anim/No07.webm',
      q: '哪一種不是天然纖維？',
      a: '棉紗',
      b: '尼龍',
      c: '麻紗',
      d: '娘仔絲',
      ans: 'B',
    });

    var v = document.getElementById('v');
    setInterval(function(){
        //console.log(v.currentTime);
        if(v.currentTime <= quests[0].startTime || v.currentTime > quests[quests.length-1].endTime){
          q_area.style.visibility = "hidden";
          q_num = 0;
          return;
        } else {
          for (let index = 0; index < quests.length; index++) {
            const element = quests[index];
            
            if(v.currentTime > element.startTime && v.currentTime <= element.endTime){
              q_area.style.visibility = "visible";
              q_q.innerHTML = element.q;
              q_a.innerHTML = element.a;
              q_b.innerHTML = element.b;
              q_c.innerHTML = element.c;
              q_d.innerHTML = element.d;

              q_ans = element.ans;

              if(q_num != index+1){
                q_result.innerHTML = '';
                q_num = index+1;
              }

            }
          }
        }

    },1000);


    q_area.style.visibility = 'hidden';


    function clickAns(click){
      console.log(click);
      if(click == q_ans){
        q_result.innerHTML = '答對了!!!';
        q_ov.src = quests[q_num].yes;
        q_ov.play();
      } else {
        q_result.innerHTML = '答錯了...';
        q_ov.src = quests[q_num].no;
        q_ov.play();
      }
    }

    $(function () {
        //设置“发送”按钮点击事件，将弹幕体显示在弹幕墙上
        $('.btnsend').click(function () {
            //获取文本输入框的内容
            var val = $('.content').val();
            //将文本框的内容赋值给val后，将文本框的内容清除，以便用户下一次输入
            $('.content').val('');
            //将文本框内容用div包裹起来，便于后续处理
            var $content = $('<div class="text">' + val + '</div>');
            //获取弹幕墙对象
            $screen = $(document.getElementById("screen"));
            //设置弹幕体出现时的上边距，为任意值
            var top = Math.random() * $screen.height();
            //设置弹幕体的上边距和左边距
            $content.css({
                top: top + "px",
                right: 10
            });
            //将弹幕体添加到弹幕墙中
            $('.dm_show').append($content);
            //弹幕体从左端移动到最右侧，时间为8秒，然后直接删除该元素
            $content.animate({
                right: $screen.width() + 10 - $content.width()
            }, 8000, "linear", function () {
                $(this).remove();
            });
        });
        //设置“清屏”点击事件，清除弹幕墙中的所有内容
        $('.btnclear').click(function () {
            $('.dm_show').empty();
        });
    });

  </script>
</body>

</html>